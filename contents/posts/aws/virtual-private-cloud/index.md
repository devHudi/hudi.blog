---
title: "[AWS] VPC (Virtual Private Cloud) (ft. CIDR, ì„œë¸Œë„·, ë¼ìš°íŒ… í…Œì´ë¸”)"
date: 2022-06-06 12:00:00
tags:
  - í•™ìŠµê¸°ë¡
  - í´ë¼ìš°ë“œ
  - aws
  - ë„¤íŠ¸ì›Œí¬
---

> ìš°ì•„í•œí…Œí¬ì½”ìŠ¤ ë ˆë²¨2 ì¥ë°”êµ¬ë‹ˆ ë¯¸ì…˜ì—ì„œ ë°°í¬ë¥¼ í•˜ê¸° ìœ„í•´ AWSì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í–ˆë‹¤. ë°°í¬ ì¸í”„ë¼ ê°•ì˜ì—ì„œ ì§¤ë§‰í•˜ê²Œ VPCì™€ Subnetì— ëŒ€í•´ ë“£ê²Œ ë˜ì—ˆê³ , ë” ìì„¸íˆ ì´í•´í•˜ê¸° ìœ„í•´ ë³„ë„ë¡œ ê³µë¶€í–ˆë‹¤. í•˜ì§€ë§Œ, ëª¨ë“  ë‚´ìš©ì„ ê³µë¶€í•˜ê¸°ì—” ê´‘ë²”ìœ„í•œ ì£¼ì œê³ , ìƒê°ë³´ë‹¤ ì–´ë ¤ì›Œ ë‹¹ì¥ í•„ìš”í•œ ìˆ˜ì¤€ì˜ í•™ìŠµë§Œ ê°„ë‹¨í•˜ê²Œ í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤. ë”°ë¼ì„œ í‹€ë¦° ë‚´ìš©ì´ ìˆì„ ìˆ˜ ìˆë‹¤ ğŸ˜…

## ì„ ìˆ˜ ì§€ì‹

VPCì— ëŒ€í•´ ì´í•´í•˜ê¸° ìœ„í•´ ë¯¸ë¦¬ ì•Œê³  ìˆì–´ì•¼ í•˜ëŠ” ì§€ì‹ì´ ì¡°ê¸ˆ ìˆì—ˆë‹¤. ì´ë¥¼ ë¨¼ì € ì ê³  VPCì— ëŒ€í•´ ì´ì•¼ê¸°í•´ë³´ë„ë¡ í•˜ê² ë‹¤.

### ì‚¬ì„¤(Private) IP vs ê³µì¸(Public) IP

ì‚¬ì„¤ IP ì£¼ì†ŒëŠ” [**ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬(Private Network)**](https://ko.wikipedia.org/wiki/%EC%82%AC%EC%84%A4%EB%A7%9D)ì— ì—°ê²°ëœ ë””ë°”ì´ìŠ¤ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” IP ì£¼ì†Œì´ë‹¤. ì‚¬ì„¤ IP ì£¼ì†ŒëŠ” ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œë§Œ ìœ íš¨í•œ ì£¼ì†Œì´ë©°, ë”°ë¼ì„œ ì™¸ë¶€ ì¸í„°ë„·ì—ì„œëŠ” ì‚¬ìš©ë  ìˆ˜ ì—†ë‹¤.

ê³µì¸ IPì£¼ì†ŒëŠ” ì¸í„°ë„·ì—ì„œ ë„¤íŠ¸ì›Œí¬ ë””ë°”ì´ìŠ¤ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•´ KT, U+, SKì™€ ê°™ì€ ì¸í„°ë„· ì„œë¹„ìŠ¤ ì œê³µì(ISP) ê°€ ì œê³µí•˜ëŠ” IPì£¼ì†Œì´ë‹¤. ë”°ë¼ì„œ ì¸í„°ë„·ì„ í†µí•´ ì—°ê²°í•  ìˆ˜ ìˆëŠ” IPì£¼ì†Œì´ë‹¤.

### CIDR(Classless Inter-Domain Routing) í‘œê¸°ë²•

CIDR í‘œê¸°ë²•ì€ `192.168.0.0/16` ì™€ ê°™ì€ í˜•íƒœë¡œ **ì—°ì†ëœ IPì£¼ì†Œì˜ ë²”ìœ„**ë¥¼ í‘œê¸°í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë‹¤. CIDRëŠ” IPv4, IPv6 ë‘˜ë‹¤ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ì´ ê¸€ì—ì„œëŠ” IPv4 ì— ëŒ€í•´ì„œë§Œ ë‹¤ë£¬ë‹¤. IPv4ëŠ” ì ìœ¼ë¡œ êµ¬ë¶„ëœ ì˜¥í…Ÿ 4ê°œë¡œ í‘œí˜„ëœ ì£¼ì†Œ ì²´ê³„ì´ë‹¤. ì˜¥í…Ÿì€ 8bit ì´ë©°, ë”°ë¼ì„œ IPv4 ì£¼ì†ŒëŠ” 32bit ë¡œ í‘œí˜„ë  ìˆ˜ ìˆë‹¤.

CIDR í‘œê¸°ë²•ì€ IPì£¼ì†Œ ë’¤ì— `/ë¹„íŠ¸ìˆ˜` ë¥¼ ë¶™ì—¬ IPì£¼ì†Œì˜ ë²”ìœ„ë¥¼ í‘œê¸°í•œë‹¤. ì´ë•Œ ì´ ë¹„íŠ¸ìˆ˜ëŠ” IPì˜ ì•ìë¦¬ë¶€í„° ëª‡ ë¹„íŠ¸ë§Œí¼ ê°€ë¦´ ê²ƒ ì¸ì§€, ì¦‰ ë§ˆìŠ¤í‚¹(Masking)í•  ê²ƒ ì¸ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `192.168.0.0/16` ì€ ì•ì—ì„œë¶€í„° 16ë¹„íŠ¸ ì¦‰, 2ê°œì˜ ì˜¥í…Ÿì„ ë§ˆìŠ¤í‚¹í•œë‹¤. ë§ˆìŠ¤í‚¹ëœ ë¹„íŠ¸ëŠ” ìˆ˜ì •í•  ìˆ˜ ì—†ìœ¼ë©°, ë§ˆìŠ¤í‚¹ ë˜ì§€ ì•Šì€ ë‚˜ë¨¸ì§€ ë¹„íŠ¸ë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤. ì¦‰, `192.168.0.0/16` ì€ `192.168.0.0` ë¶€í„° `192.168.255.255` ê¹Œì§€ì˜ ë²”ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.

ë³µì¡í•˜ë‹¤. í•˜ì§€ë§Œ ì´ë¥¼ ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ” ê³„ì‚°ê¸°ê°€ ì¸í„°ë„·ì— ë§ìœ¼ë‹ˆ ê±±ì •í•˜ì§€ ì•Šì•„ë„ ë  ê²ƒ ê°™ë‹¤.

## VPC (Virtual Private Cloud)

![](./vpc.png)

VPCëŠ” AWS ê³„ì • ì „ìš© **ê°€ìƒ ë„¤íŠ¸ì›Œí¬(Virtual Network)**ì´ë‹¤. AWS í´ë¼ìš°ë“œì—ì„œ ê° VPCëŠ” ì„œë¡œ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆë‹¤. VPCëŠ” ê°€ìƒ ë„¤íŠ¸ì›Œí¬ì´ë¯€ë¡œ ë‚´ë¶€ì— ìƒì„±ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ëŠ” ì‚¬ì„¤ IPë¥¼ í• ë‹¹ë°›ê²Œ ëœë‹¤. ì´ë•Œ ì‚¬ì„¤ IPëŠ” VPCì˜ ì„œë¸Œë„· ë²”ìœ„ì—ì„œ ìë™ìœ¼ë¡œ í• ë‹¹ë˜ê³ , í• ë‹¹ëœ ì‚¬ì„¤ IPëŠ” ë™ì¼ VPC ë„¤íŠ¸ì›Œí¬ì˜ ì¸ìŠ¤í„´ìŠ¤ê°„ í†µì‹ ì— ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.

EC2 ì¸ìŠ¤í„´ìŠ¤ì™€ ê°™ì€ AWSì˜ ë¦¬ì†ŒìŠ¤ë¥¼ VPC ë‚´ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

### VPCì˜ ì‚¬ì´ì¦ˆ ì„¤ì •

AWSì—ì„œ VPCë¥¼ ìƒì„±í•  ë•Œ VPCì—ì„œ ì‚¬ìš©í•˜ê²Œ ë  ì‚¬ì„¤ IP ì£¼ì†Œì˜ ë²”ìœ„ë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤. ì£¼ì†Œ ë²”ìœ„ëŠ” ì•ì„œ ì„ ìˆ˜ ì§€ì‹ì—ì„œ ì„¤ëª…í•œ CIDR í‘œê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ í‘œí˜„í•œë‹¤. ì¦‰, `10.0.0.0/24` ë¡œ ì„¤ì •ëœ VPCê°€ ê°€ìš©í•  ìˆ˜ ìˆëŠ” IP ë²”ìœ„ëŠ” `10.0.0.0` ë¶€í„° `10.0.0.255` ê¹Œì§€ ì¼ ê²ƒ ì´ë‹¤. ë”°ë¼ì„œ ì´ VPCëŠ” 256ê°œì˜ IPì£¼ì†Œë¥¼ ì§€ì›í•˜ê²Œ ëœë‹¤.

### ì„œë¸Œë„· (Subnet)

VPC ë‚´ë¶€ì˜ ë„¤íŠ¸ì›Œí¬ì—ì„œë„ ì„œë¹„ìŠ¤ ëª©ì ì— ë”°ë¼ **IP Block(ëŒ€ì—­)**ìœ¼ë¡œ ë‚˜ëˆ„ì–´ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. ì´ IP Blockì„ ìš°ë¦¬ëŠ” **ì„œë¸Œë„·(Subnet)** ì´ë¼ê³  í•œë‹¤. VPCëŠ” ë¦¬ì „ì˜ ëª¨ë“  ê°€ìš©ì˜ì—­ì— ì ìš©ëœë‹¤. í•˜ì§€ë§Œ ì„œë¸Œë„·ì€ ë‹¨ì¼ ê°€ìš©ì˜ì—­ì—ì„œë§Œ ìƒì„±í•  ìˆ˜ ìˆê³ , ì—¬ëŸ¬ ê°€ìš© ì˜ì—­ì— ê±¸ì³ í™•ì¥ë  ìˆ˜ ì—†ë‹¤. ì„œë¸Œë„·ì˜ IP ì£¼ì†Œ ë²”ìœ„ë„ ì•ì„œ ë§í•œ VPCì˜ ë°©ì‹ê³¼ ê°™ì´ CIDRë¡œ í‘œê¸°í•  ìˆ˜ ìˆë‹¤.

### Public Subnet, Private Subnet

![](./public-subnet-private-subnet.png)

ì„œë¸Œë„·ë„ ìœ„ì™€ ê°™ì´ í¼ë¸”ë¦­ ì„œë¸Œë„·ê³¼ í”„ë¼ì´ë¹— ì„œë¸Œë„·ìœ¼ë¡œ ë‚˜ë‰œë‹¤. í¼ë¸”ë¦­ ì„œë¸Œë„·ì€ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì´ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ (Internet Gateway, IGW) ë¡œ ë¼ìš°íŒ…ì´ ë˜ëŠ” ì„œë¸Œë„·ì„ ì˜ë¯¸í•˜ê³ , í”„ë¼ì´ë¹— ì„œë¸Œë„·ì€ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¡œ ë¼ìš°íŒ… ë˜ì§€ ì•ŠëŠ” ì„œë¸Œë„·ì„ ì˜ë¯¸í•œë‹¤. ì´ë•Œ, ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ëŠ” VPCë‹¹ í•˜ë‚˜ë§Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.

í¼ë¸”ë¦­ ì„œë¸Œë„·ì€ ì‹¤ì œ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§ˆ ì›¹ì„œë¹„ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìœ„í•´ ì‚¬ìš©í•œë‹¤. ë°˜ëŒ€ë¡œ ì¼ë°˜ ì‚¬ìš©ìë“¤ì—ê²Œ ì§ì ‘ì ìœ¼ë¡œ ë…¸ì¶œë˜ë©´ ë³´ì•ˆìƒ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” DBì„œë²„ ë“±ì€ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ìƒì„±í•œë‹¤. ë‹¨, DB ì„œë²„ì—ì„œë„ ë³´ì•ˆ ì—…ë°ì´íŠ¸ë‚˜, apt install ë“±ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì œí•œì ìœ¼ë¡œ ì™¸ë¶€ ì¸í„°ë„·ê³¼ ì—°ê²°ë  í•„ìš”ëŠ” ì¡´ì¬í•œë‹¤. ë”°ë¼ì„œ NAT(Network Address Translation) ê²Œì´íŠ¸ì›¨ì´ë¥¼ ë‘ì–´ í”„ë¼ì´ë¹— ì„œë¸Œë„· ë‚´ë¶€ì—ì„œ ì™¸ë¶€ë¡œ ë‚˜ê°€ëŠ” ë‹¨ë°©í–¥ íŠ¸ë˜í”½ë§Œ í—ˆìš©í•  ìˆ˜ ìˆë‹¤.

### ë¼ìš°íŒ… í…Œì´ë¸” (Routing Table)

ê° ì„œë¸Œë„·ì€ ì„œë¸Œë„· ì™¸ë¶€ë¡œ í–¥í•˜ëŠ” Outbound íŠ¸ë˜í”½ì— ëŒ€í•´ í—ˆìš©ëœ ê²½ë¡œë¥¼ ì§€ì •í•˜ëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì´ ì—°ê²°ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ìƒì„±ëœ ì„œë¸Œë„·ì€ ìë™ìœ¼ë¡œ VPCì˜ ê¸°ë³¸ ë¼ìš°íŒ… í…Œì´ë¸”ê³¼ ì—°ê²°ëœë‹¤. ê·¸ë¦¬ê³  ì´ ë¼ìš°íŒ… í…Œì´ë¸”ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ VPC ë‚´ë¶€ì˜ ëª¨ë“  Subnetìœ¼ë¡œ í†µì‹ ì´ ë˜ë„ë¡ ì„¤ì •ì´ ë˜ì–´ ìˆë‹¤ê³  í•œë‹¤.

ì´ ë¼ìš°íŒ… í…Œì´ë¸”ì€ VPCì˜ ì„œë¸Œë„·ì—ì„œ ë°œìƒí•œ íŒ¨í‚·ì´ ëª©ì ì´ ì£¼ì†Œë¡œ ì´ë™í•˜ê¸° ìœ„í•´ ì–´ë–¤ ê²½ë¡œë¡œ ì´ë™í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” ì´ì •í‘œì™€ ê°™ì€ ê°œë…ì´ë¼ê³  í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í¼ë¸”ë¦­ ì„œë¸Œë„·ì„ ë§Œë“¤ê¸° ìœ„í•´ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¥¼ ìƒì„±í•˜ê³ , ë¼ìš°íŒ… í…Œì´ë¸” íƒ€ê²Ÿìœ¼ë¡œ ì„¤ì •í•˜ë©´ í•´ë‹¹ ì„œë¸Œë„·ì˜ íŒ¨í‚·ì€ ì¸í„°ë„·ìœ¼ë¡œ í–¥í•  ìˆ˜ ìˆì„ ê²ƒ ì´ë‹¤.

> ìœ„ ë‚´ìš©ì€ ì•„ì§ ì´í•´ê°€ í¬ê²Œ ë˜ì§€ ì•Šì•„ ì§§ê²Œ ì ì—ˆë‹¤.

## ë§ˆì¹˜ë©°

ì‹œê°„ì´ ë„‰ë„‰ì¹˜ ì•Šì•„ ì´ë¡ ì ìœ¼ë¡œë§Œ ê³µë¶€í•˜ê³ , VPCë¥¼ ì§ì ‘ ì„¤ì •í•´ë³´ëŠ” ì‹¤ìŠµì€ ì§„í–‰í•´ë³´ì§€ ëª»í–ˆë‹¤. ì•„ë˜ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•˜ì—¬ ì¶”í›„ ì‹œê°„ì´ ë  ë•Œ ì§ì ‘ VPCë¥¼ ìƒì„±í•˜ê³  ì„¤ì •í•´ë³´ëŠ” ì‹¤ìŠµì„ ì§„í–‰í•´ì„œ ì´í•´ë„ë¥¼ ë” ë†’ì—¬ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

- [https://seungjuitmemo.tistory.com/224](https://seungjuitmemo.tistory.com/224)
- [https://velog.io/@seeh_h/AWS-VPC-Subnet-ê°„ë‹¨-ì •ë¦¬#í¼ë¸”ë¦­-ì„œë¸Œë„·--í”„ë¼ì´ë¹—-ì„œë¸Œë„·](https://velog.io/@seeh_h/AWS-VPC-Subnet-%EA%B0%84%EB%8B%A8-%EC%A0%95%EB%A6%AC#%ED%8D%BC%EB%B8%94%EB%A6%AD-%EC%84%9C%EB%B8%8C%EB%84%B7--%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EC%84%9C%EB%B8%8C%EB%84%B7)
- [https://tech.cloud.nongshim.co.kr/2018/10/16/4-ë„¤íŠ¸ì›Œí¬-êµ¬ì„±í•˜ê¸°vpc-subnet-route-table-internet-gateway/](https://tech.cloud.nongshim.co.kr/2018/10/16/4-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B5%AC%EC%84%B1%ED%95%98%EA%B8%B0vpc-subnet-route-table-internet-gateway/)

## ì°¸ê³ 

- [https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/VPC_Subnets.html#vpc-subnet-basics](https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/VPC_Subnets.html#vpc-subnet-basics)
- ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ AWS Discovery Book
